# Настройка базы данных (SQLite)

## Переход на SQLite

Проект теперь использует **SQLite** вместо PostgreSQL для локальной разработки.

### Преимущества:
- ✅ Не нужно устанавливать PostgreSQL
- ✅ База данных хранится в файле проекта
- ✅ Проще для разработки
- ✅ Автоматически создается при первой миграции

## Настройка

### 1. Обновите файл `.env`

Создайте или обновите файл `.env` в корне проекта:

```env
# SQLite база данных (локальная, в проекте)
DATABASE_URL="file:./prisma/dev.db"

# JWT
JWT_SECRET="school-portal-secret-key-change-in-production"
JWT_EXPIRES_IN="7d"

# Server
PORT=3000
NODE_ENV=development
```

### 2. Удалите старую базу данных (если была)

Если у вас была PostgreSQL база, удалите старые миграции:

```bash
# Удалите папку с миграциями (если нужно)
rm -rf prisma/migrations
```

### 3. Создайте новую базу данных

```bash
# Сгенерируйте Prisma Client
npm run prisma:generate

# Создайте миграцию
npm run prisma:migrate
```

При первом запуске миграции:
- Введите имя миграции: `init` или `initial`
- Будет создан файл `prisma/dev.db` - это ваша база данных

### 4. Проверьте работу

```bash
# Запустите сервер
npm run dev
```

База данных будет создана автоматически в файле `prisma/dev.db`

## Расположение базы данных

База данных хранится в:
```
prisma/dev.db
```

Этот файл будет создан автоматически при первой миграции.

## Просмотр данных

Используйте Prisma Studio для просмотра и редактирования данных:

```bash
npm run prisma:studio
```

Откроется веб-интерфейс по адресу `http://localhost:5555`

## Миграции

При изменении схемы БД:

```bash
npm run prisma:migrate
```

Введите имя миграции (например: `add_new_field`)

## Важно

- Файл `prisma/dev.db` уже добавлен в `.gitignore` (но не `dev.db` в корне)
- Не коммитьте файл базы данных в Git
- Для продакшена можно использовать PostgreSQL, просто измените `DATABASE_URL` в `.env`

